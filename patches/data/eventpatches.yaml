006-8KenseiNormal:
  - name: Allow Amiibo Warp without actual Amiibo
    type: flowpatch
    index: 28
    flow: {}
    cases:
      - 21 # Vanilla
      - 25 # Vanilla
      - 13 # Skip amiibo
003-ItemGet:
  - name: Scrapper Entry
    type: entryadd
    entry:
      name: "003_215"
      value: Show Scrapper Item Get Text
  - name: Scrapper Item Get Text
    type: textadd
    unk1: 5
    unk2: 1
    text: "You found Gondo's robot, <y<Scrapper>>!
          \n\n\n\nBe sure to take care of him...\neven if he's a little mean."
  - name: Show Scrapper Item Get Text
    type: flowadd
    flow:
      type: type1
      next: Give Scrapper Storyflag
      param3: 3
      param4: Scrapper Item Get Text
  - name: Give Scrapper Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 323 # Scrapper Storyflag
      next: -1
      param3: 0
  - name: Tadtone Entry
    type: entryadd
    entry:
      name: "003_214"
      value: Increment Tadtone Counter
  - name: Increment Tadtone Counter
    type: flowadd
    flow:
      type: type3
      next: Check for all Tadtones
      param1: 953 # flag
      param2: 1 # increment counter
      param3: 74 # custom command: increment tadtone group counter
  - name: Check for all Tadtones
    type: flowadd
    flow:
      type: type3
      next: Switch for all Tadtones
      param1: 0
      param2: 0
      param3: 75 # custom command: get tadtones groups remaining
  - name: Switch for all Tadtones
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous check
    cases:
      - Show all Tadtones Collected text
      - Show some Tadtones Collected text
  - name: Some Tadtones Collected text
    type: textadd
    unk1: 5
    unk2: 1
    text: "You got a group of <y<Tadtones>>!\nOnly <r<<numeric arg0> >> left to find!"
  - name: Show some Tadtones Collected text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 3
      param4: Some Tadtones Collected text
  - name: All Tadtones Collected text
    type: textadd
    unk1: 5
    unk2: 1
    text: "You got the last group of <y<Tadtones>>!\nYou found every last one of them!
          \n\n\nHurry to <b<Flooded Faron Woods>> and talk\nto the <r<Water Dragon>> to claim your\nreward."
  - name: Show all Tadtones Collected text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 3
      param4: All Tadtones Collected text
  - name: Spiral Charge Text
    type: textpatch
    index: 27
    text: "You learned the <y<Spiral Charge>>!"
  - name: Change Spiral Charge Scene change
    type: flowpatch
    index: 584 # change it to give Spiral Charge Storyflag
    flow:
      subType: 0
      param1: 0
      param2: 364
      param3: 0
  - name: Remove Goddess Sword Scene change
    type: flowpatch
    index: 462 # skip scene change after getting goddess sword
    flow:
      next: -1
  - name: Remove bipping after practice sword
    type: flowpatch
    index: 383
    flow:
      next: -1
  - name: Remove Triforce of Wisdom Scene change (1st part)
    type: flowpatch
    index: 531
    flow:
      next: -1
  - name: Remove Triforce of Wisdom Scene change (2nd part)
    type: flowpatch
    index: 532
    flow:
      next: -1
  - name: Remove Triforce of Courage Scene change (1st part)
    type: flowpatch
    index: 534
    flow:
      next: -1
  - name: Remove Triforce of Courage Scene change (2nd part)
    type: flowpatch
    index: 535
    flow:
      next: -1
  - name: Remove Triforce of Power Scene change (1st part)
    type: flowpatch
    index: 536
    flow:
      next: -1
  - name: Remove Triforce of Power Scene change (2nd part)
    type: flowpatch
    index: 537
    flow:
      next: -1
  # don't currently have option
  # - name: Give Dowsings after Whitesword
  #   type: flowpatch
  #   onlyif: dowsing_after_whitesword == on
  #   index: 542
  #   flow:
  #     next: Rupee Dowsing
  # - name: Rupee Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 105 # Rupee Dowsing
  #     next: Crystal Dowsing
  #     param3: 0
  # - name: Crystal Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 104 # Crystal Dowsing
  #     next: Treasure Dowsing
  #     param3: 0
  # - name: Treasure Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 102 # Treasure Dowsing
  #     next: Goddess Cube Dowsing
  #     param3: 0
  # - name: Goddess Cube Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 110 # Goddess Cube Dowsing
  #     next: Open Dowsing Wheel
  #     param3: 0
  # - name: Open Dowsing Wheel
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 19 # Crystal blinks
  #     next: -1
  #     param3: 56
  - name: Goddess Longsword Text
    type: textpatch
    index: 16
    text: "You got the <y<Goddess Longsword>>!\nThe flames of Farore have improved your\nsword, making it longer and sharp enough\nto do twice as much damage!"
  - name: Goddess White Sword Text
    type: textpatch
    index: 12
    text: "You got the <y<Goddess White Sword>>!\nThe flames of Nayru have transformed\nyour blade, expanding Fi's powers.\n\nShe can now help you use your <r<dowsing>>\nability to search for more objects!"
  - name: Master Sword Text
    type: textpatch
    index: 17
    text: "You got the <y<Master Sword>>!\nThe flames of Din have imbued your\nblade with a sacred white light that\ndemons revile."
  - name: True Master Sword Text
    type: textpatch
    index: 19
    text: "You got the <y<True Master Sword>>!\nThe goddess has blessed your blade, and\nthe Master Sword has at last achieved its\nultimate form!"
  - name: Harp Text
    type: textpatch
    index: 21
    text: "You got the <y<Goddess's Harp>>!\nBut there's no time to admire it!"
  - name: Emerald Tablet text
    type: textpatch
    index: 227
    text: "You got the <y<Emerald Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Ruby Tablet text
    type: textpatch
    index: 228
    text: "You got the <y<Ruby Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Amber Tablet text
    type: textpatch
    index: 229
    text: "You got the <y<Amber Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Farore's Courage Text
    type: textpatch
    index: 237
    text: "You learned <y<Farore's Courage>>!"
  - name: Nayru's Wisdom Text
    type: textpatch
    index: 238
    text: "You learned <y<Nayru's Wisdom>>!"
  - name: Din's Power Text
    type: textpatch
    index: 239
    text: "You learned <y<Din's Power>>!"
  - name: Faron SotH text
    type: textpatch
    index: 240
    text: "You learned the <y<Water Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Eldin SotH text
    type: textpatch
    index: 241
    text: "You learned the <y<Fire Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Lanayru SotH text
    type: textpatch
    index: 242
    text: "You learned the <y<Thunder Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Full SotH text
    type: textpatch
    index: 243
    text: "The <y<Song of the Hero>> is now complete!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 45 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got <r<five>> <y<Gratitude Crystals>>!\nThat is <r<<numeric arg1> >>in Total!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 62 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got <r<one>> <y<Gratitude Crystal>>!\nThat is <r<<numeric arg1> >>in Total!"
  - name: Zelda dowsing in Key Piece
    type: flowpatch
    index: 677
    flow:
      next: -1
  - name: remove BotG Scene Change # also goes to open thunderhead
    type: flowpatch
    index: 464
    flow:
      next: BotG opens Thunderhead
  - name: BotG opens Thunderhead
    type: setstoryflag
    flow:
      setstoryflag: 194 # Thunderhead open flag
      next: Check harp storyflag
  - name: Check harp storyflag
    type: checkstoryflag
    flow:
      checkstoryflag: 9
    cases:
      - Set GoT raised
      - -1
  - name: Set GoT raised
    type: setstoryflag
    flow:
      setstoryflag: 340
      next: Set imp2 defeated
  - name: Set imp2 defeated
    type: setstoryflag
    flow:
      setstoryflag: 132
      next: -1
  - name: Don't change to Skyloft layer 8/9 after getting the Triforce
    type: flowpatch
    index: 540 # before storyflag
    flow:
      next: -1 # after Storyflag
  - name: Go to Harp Storyflag
    type: flowpatch
    index: 71
    flow:
      next: Goddess Harp Storyflag
  - name: Goddess Harp Storyflag
    type: setstoryflag
    flow:
      setstoryflag: 9
      next: Groose lands in Faron Storyflag
  - name: Groose lands in Faron Storyflag
    type: setstoryflag
    flow:
      setstoryflag: 140
      next: Check BotG storyflag
  - name: Check BotG storyflag
    type: checkstoryflag
    flow:
      checkstoryflag: 194
    cases:
      - Set GoT raised
      - -1
  - name: Go to Letter Storyflag
    type: flowpatch
    index: 377
    flow:
      next: Letter Storyflag
  - name: Letter Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 547
      next: -1
      param3: 0
  - name: Go to Horned Colossus Beetle Storyflag
    type: flowpatch
    index: 380
    flow:
      next: Horned Colossus Beetle Storyflag
  - name: Horned Colossus Beetle Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 476
      next: -1
      param3: 0
  # full SotH will be given once all 3 Parts are collected
  - name: For Faron To Check Full SotH
    type: flowpatch
    index: 472
    flow:
      next: Check Faron SotH 1
  - name: For Eldin To Check Full SotH
    type: flowpatch
    index: 471
    flow:
      next: Check Faron SotH 1
  - name: For Lanayru To Check Full SotH
    type: flowpatch
    index: 475
    flow:
      next: Check Faron SotH 1
  - name: Check Faron SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 190 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Faron SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Faron SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Eldin SotH 1 # true
      - -1                 # false
  - name: Check Eldin SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 191 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Eldin SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Eldin SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Lanayru SotH 1 # true
      - -1                   # false
  - name: Check Lanayru SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 192 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Lanayru SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Lanayru SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Give full SotH # true
      - -1             # false
  - name: Give full SotH
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 193 # item
      param3: 9
      next: 477 # to full SotH text
  - name: To Set Adventure Pouch Storyflag
    type: flowpatch
    index: 603
    flow:
      next: Set Adventure Pouch Storyflag
  - name: Set Adventure Pouch Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 30 # adventure pouch unlocked
      next: -1
      param3: 0
  - name: To Set Adventure Pouch counter
    type: flowpatch
    index: 604
    flow:
      next: Add pouch slot
  - name: Add pouch slot
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 490 # counterindex
      param2: 1 # count
      next: -1
      param3: 25 # add to counter command
  - name: To Set Faron Pillar Storyflag
    type: flowpatch
    index: 385
    flow:
      next: Set Faron Pillar Storyflag
  - name: Set Faron Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 46 # Faron Pillar
      next: -1
      param3: 0
  - name: To Set Eldin Pillar Storyflag
    type: flowpatch
    index: 384
    flow:
      next: Set Eldin Pillar Storyflag
  - name: Set Eldin Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 47 # Eldin Pillar
      next: -1
      param3: 0
  - name: To Set Lanayru Pillar Storyflag
    type: flowpatch
    index: 389
    flow:
      next: Set Lanayru Pillar Storyflag
  - name: Set Lanayru Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 48 # Lanayru Pillar
      next: -1
      param3: 0
  - name: Always same Bomb text
    type: flowpatch
    index: 180
    flow:
      next: 161
  - name: To Fill Bombs
    type: flowpatch
    index: 161
    flow:
      next: Fill Bombs
  - name: Fill Bombs
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 499 # counterindex
      param2: 10 # count
      next: 414
      param3: 25 # add to counter command
  - name: Sea Chart unlocks Ship Dowsing
    type: flowpatch
    index: 528
    flow:
      next: Sea Chart dowsing
  - name: Sea Chart dowsing
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 271 # Ship Dowsing
      next: Open Dowsing wheel
      param3: 0
  - name: Open Dowsing wheel
    type: flowadd
    flow:
      type: type3
      subType: 6
      param1: 0
      param2: 7
      next: -1
      param3: 56
  - name: Remove open map demo after dungeon map
    type: flowpatch
    index: 613
    flow:
      next: -1
  - name: Remove bipping after getting slingshot
    type: flowpatch
    index: 520
    flow:
      next: -1
  - name: Set GoT flags on MS
    type: flowpatch
    index: 74
    flow: 
      next: Set AC flag for GoT on required sword
  - name: Set AC flag for GoT on required sword
    type: setstoryflag
    flow:
      setstoryflag: 11
      next: Set FS flag for GoT on required sword
  - name: Set FS flag for GoT on required sword
    type: setstoryflag
    flow:
      setstoryflag: 13
      next: -1
  # don't currently have option
  # - name: Patch Medium Wallet
  #   onlyif: full_wallet_upgrades == on
  #   type: flowpatch
  #   index: 246
  #   flow:
  #     next: Fill Medium Wallet
  # - name: Fill Medium Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 200 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Big Wallet
  #   onlyif: full_wallet_upgrades == on
  #   type: flowpatch
  #   index: 245
  #   flow:
  #     next: Fill Big Wallet
  # - name: Fill Big Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 500 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Giant Wallet
  #   onlyif: full_wallet_upgrades == on
  #   type: flowpatch
  #   index: 244
  #   flow:
  #     next: Fill Giant Wallet
  # - name: Fill Giant Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 4000 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Tycoon Wallet
  #   onlyif: full_wallet_upgrades == on
  #   type: flowpatch
  #   index: 255
  #   flow:
  #     next: Fill Tycoon Wallet
  # - name: Fill Tycoon Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 4000 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Extra Wallets
  #   onlyif: full_wallet_upgrades == on
  #   type: flowpatch
  #   index: 497
  #   flow:
  #     next: Fill Extra Wallets
  # - name: Fill Extra Wallets
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 300 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count

004-Object:
  - name: Remove Heart piece hint from gossip stone
    type: flowpatch
    index: 76
    flow:
      next: -1
  - name: Force text for lower platform cave hint
    type: flowpatch
    index: 57
    flow:
      next: 56
  - name: Force text for upper platform cave hint
    type: flowpatch
    index: 31
    flow:
      next: 30

# 006-8KenseiNormal
# 008-Hint

101-Shop:
  - name: Remove pouch bipping after item seller
    type: flowpatch
    index: 89
    flow:
      next: 116

102-Zelda:
  - name: Fledge Quest Switch 1
    type: flowpatch
    index: 230
    flow:
      param2: 36 # always trigger
  - name: Fledge Quest Switch 2
    type: flowpatch
    index: 229
    flow:
      param2: 36 # always trigger

105-Terry:
  - name: Beedle's Crystal # Can't reach that right now
    type: flowpatch
    index: 115
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Can't buy Pouch text
    type: textadd
    text: "You need an <y<Adventure Pouch>> to buy\nthis!"
  - name: Show can't buy Pouch text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 87
      param4: Can't buy Pouch text
  - name: Check for Pouch
    type: switchadd
    flow:
      subType: 6
      param2: 30 # Adventure pouch unlocked
      param3: 3
    cases:
      - 43 # do event as normal
      - Show can't buy Pouch text
  - name: go to Check for Pouch
    onlyif: randomized_shops == vanilla
    type: flowpatch
    index: 16
    flow:
      next: Check for Pouch
  # shopsanity option stuff
  # - name: Second 100 Rupee Item
  #   onlyif: randomized_shops != vanilla
  #   type: entryadd
  #   entry:
  #     name: "105_39"
  #     value: Second 100R first event
  # - name: Second 100R first event
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 1
  #     next: Second 100R second event
  #     param3: 12
  # - name: Second 100R second event
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 4
  #     param1: 0
  #     param2: 21
  #     next: Second 100R discount switch 1
  #     param3: 13
  # - name: Second 100R discount switch 1
  #   onlyif: randomized_shops != vanilla
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 478 # Already used discount
  #     param3: 3
  #   cases:
  #     - Show Second 100R undiscounted Text
  #     - Second 100R discount switch 2
  # - name: Second 100R discount switch 2
  #   onlyif: randomized_shops != vanilla
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 477 # Gave Beedles Beetle, has discount
  #     param3: 3
  #   cases:
  #     - Show Second 100R discounted Text
  #     - Show Second 100R undiscounted Text
  # - name: Show Second 100R undiscounted Text
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Second 100R undiscounted Text
  # - name: Show Second 100R discounted Text
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Second 100R discounted Text
  # - name: Third 100 Rupee Item
  #   onlyif: randomized_shops != vanilla
  #   type: entryadd
  #   entry:
  #     name: "105_40"
  #     value: Third 100R first event
  # - name: Third 100R first event
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 1
  #     next: Third 100R second event
  #     param3: 12
  # - name: Third 100R second event
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 4
  #     param1: 0
  #     param2: 21
  #     next: Third 100R discount switch 1
  #     param3: 13
  # - name: Third 100R discount switch 1
  #   onlyif: randomized_shops != vanilla
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 478 # Already used discount
  #     param3: 3
  #   cases:
  #     - Show Third 100R undiscounted Text
  #     - Third 100R discount switch 2
  # - name: Third 100R discount switch 2
  #   onlyif: randomized_shops != vanilla
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 477 # Gave Beedles Beetle, has discount
  #     param3: 3
  #   cases:
  #     - Show Third 100R discounted Text
  #     - Show Third 100R undiscounted Text
  # - name: Show Third 100R undiscounted Text
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Third 100R undiscounted Text
  # - name: Show Third 100R discounted Text
  #   onlyif: randomized_shops != vanilla
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Third 100R discounted Text

106-DrugStore:
  - name: Potion Lady Text Patch # generalized for rando
    type: textpatch
    index: 5
    text: "Just so you know, I can't sell you a \npotion if you don't have an Empty \nBottle to pour it into!\n\n\x0E\x01\x09\x04\x09\x90For some reason, I like you, though, so\nI'll give you a spare item I've\nbeen keeping here in the stall!\nOh, it's nothing. It's my little gift."
  - name: Potion Lady Bottle # skip pouch requirements
    type: flowpatch
    index: 42
    flow:
      next: 44 # give item
  - name: Requirement for Stamina Potion
    type: flowpatch
    index: 103
    flow:
      param2: 8 # raised LMF
  - name: Remove pouch bipping from Potion Lady
    type: flowpatch
    index: 115
    flow:
      next: 111

107-Kanban:
  - name: Fi give Goddess Statue items
    type: flowpatch
    index: 12
    flow:
      next: Fi give Goddess Statue item 1
  - name: Fi give Goddess Statue item 1
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Fi give Goddess Statue item 2
      param3: 9
  - name: Fi give Goddess Statue item 2
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: -1
      param3: 9

108-ShinkanA:
  - name: Owlans Shield
    type: flowpatch
    index: 168
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 172 # end of owlans text
      param3: 9
      param4: 0
      param5: 0
  - name: Remove bipping after Owlan's Gift
    type: flowpatch
    index: 165
    flow:
      next: -1
  - name: Hint to owlan crystals
    type: flowpatch
    index: 271
    flow:
      param2: 57 # changes switch condition to kikwi elder slingshot storyflag
  - name: Does not have slingshot
    type: textpatch
    index: 68 # switch is false
    text: "\x0E\x01\x09\x04\x00\x01By the way, <heroname>, I have been \nlooking for new sources of research\nabout <b<plant life>>.\n\nIf you ever find something, please meet\nme <r<in the Knight Academy>>!"
  - name: Does have slingshot
    type: textpatch
    index: 69 # switch is true
    text: "\x0E\x01\x09\x04\x00\x01Oh, <heroname>, something tells me you\nmight know some <b<plant life>> I could\nresearch! Please meet me \n<r<in the Knight Academy>>!"

109-TakeGoron:
  - name: Peater's Crystal 1
    type: flowpatch
    index: 79
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Peater's Crystal 2
    type: flowpatch
    index: 92
    flow:
      next: 79
  - name: To Sword Check
    # prevent playing bamboo cutting without any sword
    type: flowpatch
    index: 35
    flow: {}
    cases:
      - Sword Check # soup has been delivered, normal event
      - 37 # no
  - name: Sword Check
    type: switchadd
    flow:
      subType: 6
      param2: 906 # Rando storyflag for practice sword
      param3: 3
    cases:
      - 36 # normal text
      - Show No Sword Text
  - name: No Sword Text
    type: textadd
    text: "You don't have a Sword,\nso I can't let you play!"
  - name: Show No Sword Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 109
      param4: No Sword Text

110-DivingGame:
  - name: Shorten Dodoh quest start text
    type: flowpatch
    index: 49
    flow:
      next: 55
  - name: Fun Fun Owner's Quest requirement
    type: flowpatch
    index: 38
    flow:
      param2: 36 # always trigger
  - name: Fun Fun Owner's Crystal
    type: flowpatch
    index: 60
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0

111-FortuneTeller:
  - name: Skip over Water Basin dowsing
    type: flowpatch
    index: 99
    flow:
      param2: 668
  - name: Skip over Wheel opening
    type: flowpatch
    index: 104
    flow:
      param2: 96

113-RemodelStore:
  - name: Change switch for getting Treasure Dowsing
    type: flowpatch
    index: 143
    flow:
      param2: 909 # Whitesword
  # don't have option yet
  # - name: remove Treasure Dowsing 1
  #   onlyif: dowsing_after_whitesword == on
  #   type: flowpatch
  #   index: 123
  #   flow:
  #     next: -1
  # - name: remove Treasure Dowsing 2
  #   onlyif: dowsing_after_whitesword == on
  #   type: flowpatch
  #   index: 13
  #   flow:
  #     next: -1
  - name: Gondo patch
    type: flowpatch
    index: 92
    flow:
      param2: 322 # Learn about Scrapper near Village Windmill (repurposed for rando)
    cases:
      - 93 # true
      - Show Gondo Options # false
  - name: Patch Gondo Options Text After Check
    type: textpatch
    index: 114
    text: "Hey, kid! Anything to upgrade today?\n[1]Upgrade gear.[2]Repair shield.[3-]No, thanks."
  - name: Gondo Options Text
    type: textadd
    text: "Heyyyyy! Welcome to the Scrap Shop!\nI can use the stuff you find to upgrade\nyour gear and make it even stronger!
          \n\nAnd if your shield takes a beating, no\nworries. I can fix that too.\nSo what'll it be?\n[1]Upgrade gear.[2]Fix shield.[3]<r<Repair Junk?>>[4-]Never mind."
  - name: Show Gondo Options
    type: flowadd
    flow:
      type: type1
      next: Gondo Options Switch
      param3: 103
      param4: Gondo Options Text
  - name: Gondo Options Switch
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 0
    cases:
      - 31 # Upgrade gear.
      - 69 # Fix shield.
      - 97 # Repair Junk?
      - 3 # Never mind.
  - name: Patch Gondo Repair Scrapper Text 1
    type: textpatch
    index: 101
    text: "Oh that?\nWell, my old Gramps did tell me this:
          \n\n\n\"You can get this working again with\nthe extract from an <y<Ancient Flower>>.\"\nBut I've never even heard of, much less\nseen, any such thing!\n[1]Take mine![2-]Me neither."
  - name: Patch Gondo Repair Scrapper Text 2
    type: textpatch
    index: 108
    text: "So this is an <y<Ancient Flower>>?!\nI can feel some slick, oily stuff coming\nout of its stem! Great, with this we can\nfix my old Gramps' stuff!\n...Wait right here! I'll have it up and\nrunning in no time!"
  - name: Skip Scrapper Repaired Text 1
    type: flowpatch
    index: 59
    flow:
      next: 118
  - name: Skip Scrapper Repaired Text 2
    type: flowpatch
    index: 118
    flow:
      next: 134
  - name: Patch post Gondo Repair Text
    type: textpatch
    index: 115
    text: "Well, here you are. All fixed up!
          \n\n\n\nI couldn't have done it without your\nhelp. So, here, you have it...\nwhat ever this is..."
  - name: Skip Scrapper Repaired Text 3
    type: flowpatch
    index: 134
    flow:
      next: 50 # give scrapper repaired flag
  - name: Skip Scrapper Repaired Text 4
    type: flowpatch
    index: 50
    flow:
      param2: 322 # Learn about Scrapper near Village Windmill (repurposed for rando)
      next: Give Repair Gondo Junk item
  - name: Give Repair Gondo Junk item
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: -1
      param3: 9

# need to clean up
114-Friend:
  - name: Skip Fledge camera panning 1
    type: flowpatch
    index: 15
    flow:
      next: 22
  - name: Skip Fledge talking about the hero's tunic
    type: flowpatch
    index: 22
    flow:
      next: 51
  - name: Skip Fledge wait frames
    type: flowpatch
    index: 51
    flow:
      next: 50
  - name: Skip more Fledge camera panning
    type: flowpatch
    index: 50
    flow:
      next: 16
  - name: Skip Fledge talking about the Adventure Pouch # skips part explaining the adventure pouch
    type: flowpatch
    index: 16
    flow:
      next: -1 # Set bwheel storyflag
  - name: Set bwheel storyflag
    type: setstoryflag
    flow:
      setstoryflag: 58
      next: Set tunic storyflag
  - name: Set tunic storyflag
    type: setstoryflag
    flow:
      setstoryflag: 36
      next: Set loftwing storyflag
  - name: Set loftwing storyflag
    type: setstoryflag
    flow:
      setstoryflag: 27
      next: Set can jump off loftwing storyflag
  - name: Set can jump off loftwing storyflag
    type: setstoryflag
    flow:
      setstoryflag: 198
      next: Give Amiibo Storyflag
  - name: Give Amiibo Storyflag
    type: setstoryflag
    flow:
      setstoryflag: 1201
      next: Set upper academy gate/sparring hall open sceneflag
  - name: Set upper academy gate/sparring hall open sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 21
      sceneindex: 0
      next: Set LA gates sceneflag
  - name: Set LA gates sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 0
      sceneindex: 0
      next: Set hero mode storyflag
  - name: Set hero mode storyflag
    type: setstoryflag
    flow:
      setstoryflag: 226
      next: Set emerald tablet storyflag
  - name: Set emerald tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 46
      next: Set ruby tablet storyflag
  - name: Set ruby tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 47
      next: Set amber tablet storyflag
  - name: Set amber tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 48
      next: Set sailcloth storyflag
  - name: Set sailcloth storyflag
    type: setstoryflag
    flow:
      setstoryflag: 32
  #     next: Set botg storyflag
  # - name: Set botg storyflag
  #   type: setstoryflag
  #   flow:
  #     setstoryflag: 194
      next: Set spiral charge storyflag
  - name: Set spiral charge storyflag
    type: setstoryflag
    flow:
      setstoryflag: 364
      next: Set UA doors sceneflag
  - name: Set UA doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 1
      sceneindex: 0
      next: Set after tunic sceneflag
  - name: Set after tunic sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 8
      sceneindex: 0
      next: Set eye cs sceneflag
  - name: Set eye cs sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 26
      sceneindex: 0
      next: Set bat doors sceneflag
  - name: Set bat doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 66
      sceneindex: 0
      next: Set inside US doors sceneflag
  - name: Set inside US doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 67
      sceneindex: 0
      next: Set ruby fi text sceneflag
  - name: Set ruby fi text sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 95
      sceneindex: 0
      next: Set amber fi text sceneflag
  - name: Set amber fi text sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 96
      sceneindex: 0
      next: Set gate to faron storyflag
  - name: Set gate to faron storyflag
    type: setstoryflag
    flow:
      setstoryflag: 494
      next: Set crystal quest storyflag
  - name: Set crystal quest storyflag
    type: setstoryflag
    flow:
      setstoryflag: 304
      next: Set first pillar storyflag
  - name: Set first pillar storyflag
    type: setstoryflag
    flow:
      setstoryflag: 724
      next: Set first map storyflag
  - name: Set first map storyflag
    type: setstoryflag
    flow:
      setstoryflag: 96
      next: Set 5 beacons storyflag
  - name: Set 5 beacons storyflag
    type: setstoryflag
    flow:
      setstoryflag: 745
      next: Set skipper chart cs storyflag
  - name: Set skipper chart cs storyflag
    type: setstoryflag
    flow:
      setstoryflag: 496
      next: Set beacon storyflag
  - name: Set beacon storyflag
    type: setstoryflag
    flow:
      setstoryflag: 130
      next: Set SG big door cs storyflag
  - name: Set SG big door cs storyflag
    type: setstoryflag
    flow:
      setstoryflag: 792
      next: Set dowsing storyflag
  - name: Set dowsing storyflag
    type: setstoryflag
    flow:
      setstoryflag: 789
      next: Set windmill repaired storyflag
  - name: Set windmill repaired storyflag
    type: setstoryflag
    flow:
      setstoryflag: 661
      next: Set sealed temple layer 1 storyflag
  - name: Set sealed temple layer 1 storyflag
    type: setstoryflag
    flow:
      setstoryflag: 138
      next: Set sky fi text storyflag
  - name: Set sky fi text storyflag
    type: setstoryflag
    flow:
      setstoryflag: 24
      next: Set no sleeping for wyrna storyflag
  - name: Set no sleeping for wyrna storyflag
    type: setstoryflag
    flow:
      setstoryflag: 329
      next: Set practice sword storyflag
  - name: Set practice sword storyflag
    type: setstoryflag
    flow:
      setstoryflag: 28
      next: Set updated sand sea map storyflag
  - name: Set updated sand sea map storyflag
    type: setstoryflag
    flow:
      setstoryflag: 519
      next: Set full lake floria storyflag
  - name: Set full lake floria storyflag
    type: setstoryflag
    flow:
      setstoryflag: 115
      next: Set updated desert map storyflag
  - name: Set updated desert map storyflag
    type: setstoryflag
    flow:
      setstoryflag: 129
      next: Set instructor text after sword storyflag
  - name: Set instructor text after sword storyflag
    type: setstoryflag
    flow:
      setstoryflag: 199
      next: Set eldin entrance statue storyflag
  - name: Set eldin entrance statue storyflag
    type: setstoryflag
    flow:
      setstoryflag: 804
      next: Set first part of bertie text storyflag
  - name: Set first part of bertie text storyflag
    type: setstoryflag
    flow:
      setstoryflag: 386
      next: Give WS storyflag

      
  - name: Give WS storyflag
    type: setstoryflag
    flow:
      setstoryflag: 909
      next: Bow storyflag
  - name: Bow storyflag
    type: setstoryflag
    flow:
      setstoryflag: 944
      next: Give bow
  - name: Give bow
    type: setitemflag
    flow:
      itemid: 19
      next: Give Whitesword
  - name: Give Whitesword # whitesword atm so you only need to hardcode 1 sword to get to MS to test GoT sword requirements (item get sets needed storyflags)
    type: setitemflag
    flow:
      itemid: 10
      next: Give sailcloth
  - name: Give sailcloth
    type: setitemflag
    flow:
      itemid: 15
  #     next: Give harp # commented out for now because harp item get gives you needed storyflag for GoT (will be a lot more reliable when we have actual start items)
  # - name: Give harp
  #   type: setitemflag
  #   flow:
  #     itemid: 16
      next: Give clawshots
  - name: Give clawshots
    type: setitemflag
    flow:
      itemid: 20
      next: Give bellows
  - name: Give bellows
    type: setitemflag
    flow:
      itemid: 49
      next: Give slingshot
  - name: Give slingshot
    type: setitemflag
    flow:
      itemid: 52
      next: Give beetle
  - name: Give beetle
    type: setitemflag
    flow:
      itemid: 53
      next: Give heetle
  - name: Give heetle
    type: setitemflag
    flow:
      itemid: 75
      next: Give queetle
  - name: Give queetle
    type: setitemflag
    flow:
      itemid: 76
      next: Give teetle
  - name: Give teetle
    type: setitemflag
    flow:
      itemid: 77
      next: Give mitts
  - name: Give mitts
    type: setitemflag
    flow:
      itemid: 56
      next: Give mogmitts
  - name: Give mogmitts
    type: setitemflag
    flow:
      itemid: 99
      next: Give scale
  - name: Give scale
    type: setitemflag
    flow:
      itemid: 68
      next: Give net
  - name: Give net
    type: setitemflag
    flow:
      itemid: 71
      next: Give bombs
  - name: Give bombs
    type: setitemflag
    flow:
      itemid: 92
      next: Give whip
  - name: Give whip
    type: setitemflag
    flow:
      itemid: 137
      next: Give fse
  - name: Give fse
    type: setitemflag
    flow:
      itemid: 138
      next: -1

115-Town2:
  - name: Shorten Karane letter text
    type: flowpatch
    index: 592
    flow:
      next: 612
  - name: Shorten Pipit letter text
    type: flowpatch
    index: 92
    flow:
      next: 121
  - name: Shorten letter cutscene
    type: flowpatch
    index: 365
    flow:
      next: 377
  - name: Parrow's Empty Bottle
    type: flowpatch
    index: 734
    flow:
      next: 735 # jump to give item
  - name: Parrow's Spores Bottle
    type: flowpatch
    index: 199
    flow:
      next: 746 # to item
  - name: Parrow's Crystal 1
    type: flowpatch
    index: 813
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Parrow's Crystal 2
    type: flowpatch
    index: 787
    flow:
      next: 813
  - name: Feldge's Crystal
    type: flowpatch
    index: 325
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Baby's Crystal
    type: flowpatch
    index: 125
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Orrielle's Crystal
    type: flowpatch
    index: 225
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Ghost's Crystal
    type: flowpatch
    index: 522
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Crystal
    type: flowpatch
    index: 641
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Skip Clawshots Requirement for Rattle Delivery
    type: flowpatch
    index: 7
    flow:
      next: 8
  - name: Change Cawlin storyflag
    type: flowpatch
    index: 165
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 33
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 141
    flow:
      param2: 36 # always trigger
      param3: 3 # check Storyflag
  - name: add Cawlin storyflag to other text options
    type: flowpatch
    index: 507
    flow:
      next: 503
  # needs asm change to work
  # - name: to rerandomize treasure question
  #   type: flowpatch
  #   index: 410
  #   flow:
  #     next: Show Rerandomize Treasure Question
  # - name: Rerandomize Treasure Question
  #   type: textadd
  #   text: "Want to sell something different?\n[1]Yes[2-]No"
  # - name: Show Rerandomize Treasure Question
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: Treasure Question Switch
  #     param3: 115
  #     param4: Rerandomize Treasure Question
  # - name: Rerandomize Treasure
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 9 # custom actor action done with asm
  #     param2: 0 # item
  #     param3: 33 # make actor do something
  #     next: 495 # ask to buy again
  #     param4: 0
  #     param5: 0
  # - name: Treasure Question Switch
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 0
  #     param3: 0
  #   cases:
  #     - Rerandomize Treasure
  #     - -1
  - name: Skip to end of fledge 2
    type: flowpatch
    index: 347 # after giving fledge the second stamina potion
    flow:
      next: 353
  - name: Skip Fledge 3
    type: flowpatch
    index: 353
    flow:
      next: 320 # before crystal itemget

116-InsectGame:
  - name: Fix switch 1
    type: flowpatch
    index: 25
    flow:
      param2: 925
  - name: Fix switch 2
    type: flowpatch
    index: 61
    flow:
      param2: 925
  - name: Fix switch 3
    type: flowpatch
    index: 24
    flow:
      param2: 36 # always trigger
  - name: getting item from Strich flag
    type: flowpatch
    index: 68
    flow:
      param2: 925

117-Pumpkin:
  - name: Kina's Crystal
    type: flowpatch
    index: 386
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: playing Harp with Kina 1
    type: flowpatch
    index: 434
    flow:
      param2: 9 # Harp
  - name: playing Harp with Kina 2
    type: flowpatch
    index: 80
    flow:
      param2: 9 # Harp
  - name: playing Harp with Kina 3
    type: flowpatch
    index: 579
    flow:
      param2: 9 # Harp
  - name: Fs requirement for Kina Quest
    type: flowpatch
    index: 93
    flow:
      param2: 36 # always trigger
  - name: ET requirement for Pumpkin Quest
    type: flowpatch
    index: 78
    flow:
      param2: 36 # always trigger
  - name: Switch for Chandelier just fell
    type: switchadd
    flow:
      subType: 6
      param2: 3
      param3: 5 # zone temp flag 3, set after crashing chandelier
    cases:
      - 520 # jump over soup
      - 118 # normal event
  - name: Show Levias or other text before going down Quest
    # this switch checks if the soup has been delivered to levias
    # if no, it would normally only allow levias stuff, which locks the normal lumpy pumpkin quest
    type: flowpatch
    index: 211
    flow: {}
    cases:
      - 216 # soup has been delivered, normal event
      - Check for Scrapper
  - name: Check for Scrapper
    type: switchadd
    flow:
      subType: 6
      param2: 323 # Scrapper repaired
      param3: 3 # check storyflag
    cases:
      - Show new Text Option # soup has not been delivered, ask which quest to do
      - 216 # no scrapper = normal event
  - name: Go to Switch for Chandelier
    type: flowpatch
    index: 6
    flow:
      next: Switch for Chandelier just fell
  - name: Fix Soup textboxes
    type: textpatch
    index: 143
    text: "What's the matter? You look like\nyou've got something mighty\nserious on your mind.\n[1]Soup[2-]No Soup"
  - name: Go back to Chandelier Quest
    type: flowpatch
    index: 347
    flow:
      next: 520
  - name: New text Option
    type: textadd
    text: "Hey, you look like you have a Questions?\n[1]Levias[2-]Other Things"
  - name: Show new Text Option
    type: flowadd
    flow:
      type: type1
      next: Text option Switch
      param3: 111
      param4: New text Option
  - name: Text option Switch
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 0
    cases:
      - 208
      - 216
  - name: New Kina Text Option
    type: textadd
    text: "Hey, kid, what do you need from me?\n[1]Plowing the fields?[2]Carrying pumpkins![3-]Nothing."
  - name: Kina Quest Switch
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 0
    cases:
      - 96 # mogma quest switch
      - 200 # pumpkin carrying
      - -1 # nothing
  - name: Show Kina Option
    type: flowpatch
    index: 605
    flow:
      type: type1
      next: Kina Quest Switch
      param4: New Kina Text Option
  - name: Shorten Kina Text
    type: flowpatch
    index: 97
    flow:
      next: 103

118-Town3:
  - name: Shorten Sparrot quest start text
    type: flowpatch
    index: 100
    flow:
      next: 97
  - name: Shorten Owlan quest start text
    type: flowpatch
    index: 320
    flow:
      next: 133
  - name: Wryna's Crystal
    type: flowpatch
    index: 144
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Sparrot's Crystal
    type: flowpatch
    index: 141
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Owlan's Crystal
    type: flowpatch
    index: 157
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0

120-Nushi:
  - name: Fix Levias
    type: flowpatch
    index: 7
    flow:
      next: 21 # never talk about triforce or song of the hero
  - name: Shorten Levias text
    type: flowpatch
    index: 0
    flow:
      next: 22
  - name: Skip bokobase story flag
    type: flowpatch
    index: 22
    flow:
      next: -1 # don't set bokobase
  - name: Give item after levias
    type: entryadd
    entry:
      name: "120_03"
      value: After levias event start
  - name: After levias event start
    type: flowadd
    flow:
      type: start
      next: give item after levias
  - name: give item after levias
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 37 # set unset story flag
      param3: 9

121-AkumaKun:
  - name: Never say cursed medal chest text
    type: flowpatch
    index: 9 # start
    flow:
      next: 120 # normal text

123-Town5:
  - name: Peatrice's Crystal
    type: flowpatch
    index: 316
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Mom's Crystal
    type: flowpatch
    index: 186
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0

200-Forest:
  - name: give slingshot directly
    type: flowpatch
    index: 567
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: insert owlan hint text # elder talks after gotten sligshot
      param3: 9
      param4: 0
      param5: 0
  - name: text hinting to owlan
    type: textadd
    text: "\x0E\x01\x09\x04\x00\x08Do you think there might be a\n<r<professor>> who would want to see\n<b<one of my Kikwis>>, kwee?"
  - name: insert owlan hint text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: text hinting to owlan
  - name: change later elder text to reference owlan
    type: flowpatch
    index: 46 # text when you talk to the kikwi elder after slingshot
    flow:
      next: insert owlan hint text
  - name: Skip over Zelda Dowsing
    type: flowpatch
    index: 382
    flow:
      next: 127
  - name: Skip over Zelda Dowsing 2
    type: flowpatch
    index: 412
    flow:
      next: -1
  - name: Skip over Zelda Dowsing 3
    type: flowpatch
    index: 321
    flow:
      next: -1
  - name: Skip over Zelda Dowsing 3
    type: flowpatch
    index: 600
    flow:
      next: -1
  - name: Skip over Fi text after locateing machi
    type: flowpatch
    index: 91
    flow:
      next: 313
  - name: From storyflag after machi to sceneflag
    type: flowpatch
    index: 313
    flow:
      next: 583
  - name: End after machi sceneflag
    type: flowpatch
    index: 583
    flow:
      next: -1
  - name: Skip over Fi text after locateing Oolo
    type: flowpatch
    index: 32
    flow:
      next: -1
  - name: Skip over Fi text after locateing Erla
    type: flowpatch
    index: 641
    flow:
      next: -1
  # hd sets an addtion scene flag after this, worth keeping in mind if there are problems
  - name: Skip over Fi text after locateing Lopsa
    type: flowpatch
    index: 163
    flow:
      next: -1
  - name: change Flag to skip over Fi telling you that you can roll
    type: flowpatch
    index: 118
    flow:
      param1: 13
      param3: 2

201-ForestD1:
  - name: give item after beating skyview
    type: flowpatch
    index: 6
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Give Skyview beaten story flag
      param3: 9
      param4: 0
      param5: 0
  - name: Give Skyview beaten story flag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 5 # Skyview beaten story flag
      next: 79 # set zone flag for exit
      param3: 0
  - name: Prevent softlock on exit
    type: flowpatch
    index: 79
    flow:
      next: -1

202-ForestD2:
  - name: Shorten Ghirahim text before Koloktos
    type: flowpatch
    index: 18
    flow:
      next: 34
  - name: Give item after AC
    type: entryadd
    entry:
      name: "202_31"
      value: After AC event start
  - name: After AC event start
    type: flowadd
    flow:
      type: start
      next: give item after beating ancient cistern
  - name: give item after beating ancient cistern
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Set zoneflag to trigger loadzone
      param3: 9
  - name: Set zoneflag to trigger loadzone
    type: setzoneflag
    flow:
      setzoneflag: 3
      next: -1
  # make sure central statue can be moved down again, for that allow the player to
  # talk to the tablet and then lower the statue and reload
  - name: Statue Lower Question
    type: textpatch
    index: 9
    text: "Do you want to reset the statue?\n[1]Yes[2-]No"
  - name: Replace Stone Tablet Fi Event
    type: flowpatch
    index: 7
    flow:
      next: Statue Lower Switch
  - name: Statue Lower Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Unset Question Trigger then lower Statue # yes
      - Unset Question Trigger # no
  - name: Unset Question Trigger
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 60 # 60 triggers fi
      param2: 12
      next: -1
      param3: 3
  - name: Unset Question Trigger then lower Statue
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 60 # 60 triggers fi
      param2: 12
      next: Unset Raise Statue Sceneflag
      param3: 3
  - name: Unset Raise Statue Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 126
      param2: 12
      next: Unset Lower Statue Sceneflag
      param3: 3
  - name: Unset Lower Statue Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 100
      param2: 12
      next: Unset Valve on Top Sceneflag
      param3: 3
  - name: Unset Valve on Top Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 121
      param2: 12
      next: Trigger Exit
      param3: 3
  - name: Trigger Exit
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 0
      param2: 0
      next: -1
      param3: 10

203-ForestF2:
  - name: Skip over Sacred Water dowsing
    type: flowpatch
    index: 62
    flow:
      next: 468
  - name: Offer entry into Flooded Faron
    type: flowpatch
    index: 68
    flow:
      next: Tadtones Completion Storyflag Check
  - name: Tadtones Completion Storyflag Check
    type: switchadd
    flow:
      subType: 6
      param2: 18 # All Tadtones Collected
      param3: 3
    cases:
      - Show Already Completed Tadtones Text # Tadtones complete
      - Show Flooded Faron Entry Question
  - name: Already Completed Tadtones Text
    type: textadd
    text: "You have already completed my final\ntest. There is nothing more I can do\nfor you."
  - name: Show Already Completed Tadtones Text
    type: flowadd
    flow:
      type: type1
      next: Show Flooded Faron Reentry Text
      param3: 302
      param4: Already Completed Tadtones Text
  - name: Flooded Faron Reentry Text
    type: textadd
    text: "Would you like me to <r<flood the forest>>\nagain?\n[1]Yes[2-]No"
  - name: Show Flooded Faron Reentry Text
    type: flowadd
    flow:
      type: type1
      next: Flooded Faron Reentry Switch
      param3: 302
      param4: Flooded Faron Reentry Text
  - name: Flooded Faron Reentry Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Trigger Exit to Flooded Faron Layer 2 # Yes
      - Show Declined Flooded Faron Offer Text # No
  - name: Show Flooded Faron Entry Question
    type: flowadd
    flow:
      type: type1
      next: Flooded Faron Entry Switch
      param3: 302
      param4: Flooded Faron Entry Question
  - name: Flooded Faron Entry Question
    type: textadd
    text: "Here to accept my final test? I will\n<r<flood the forest>> if you choose to\naccept.\n[1]Yes[2-]No"
  - name: Flooded Faron Entry Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Trigger Exit to Flooded Faron Layer 2 # Yes
      - Show Declined Flooded Faron Offer Text # No
  - name: Declined Flooded Faron Offer Text
    type: textadd
    text: "Very well. Talk to me again if you\nchange your mind."
  - name: Show Declined Flooded Faron Offer Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: Declined Flooded Faron Offer Text
  - name: Trigger Exit to Flooded Faron Layer 2
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 5 # Entrance number
      param2: 0
      next: -1
      param3: 10 # Triggers an exit
  - name: Force Yerbal to ignore floria gates story flags
    type: flowpatch
    index: 81
    flow:
      next: Give talked to Yerbal storyflag
  - name: Give talked to Yerbal storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 63 # Talked to Yerbal storyflag
      next: 83
      param3: 0
  - name: Skip Yerbal's questions
    type: flowpatch
    index: 356
    flow:
      next: 357
  # don't have open floria options yet
  # - name: Patch Yerbal intro text
  #   type: textpatch
  #   index: 4
  #   text: "They used to call me <b<Yerbal>>. Now I'm\njust the old <b<Kikwi hermit>>."
  # - name: Go to explanation of floria gates
  #   onlyif: open_lake_floria != yerbal
  #   type: flowpatch
  #   index: 357
  #   flow:
  #     next: 373
  # - name: Make Yerbal open the floria gates
  #   onlyif: open_lake_floria == yerbal
  #   type: flowpatch
  #   index: 357
  #   flow:
  #     next: Show Yerbal open floria gates text
  # - name: Yerbal open floria gates text
  #   type: textadd
  #   text: "However, <b<Faron>>, the Water Dragon,\nlet me know a secret of hers.\nKwwwwwwrk...
  #         \n\nSee, she gave me a <r<spare key>> to the\nLake, kwwwrk!
  #         \n\n\nDon't tell her I'm letting you in\nthough. I've heard stories of folks\nwho caught her in a fussy mood.
  #         \n\nThey ended up as midmorning snacks,\nkwwwwrk!"
  # - name: Show Yerbal open floria gates text
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: Open floria gates
  #     param3: 302
  #     param4: Yerbal open floria gates text
  # - name: Open floria gates
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 49 # Floria gates opening cutscene scene flag
  #     param2: 2
  #     next: -1
  #     param3: 2
  # - name: Patch Yerbal floria gates intro
  #   type: textpatch
  #   index: 24
  #   text: "See those gates over there? They\nlead to <b<Lake Floria>>. However, the\n<r<Water Dragon>> has sealed them shut to\nall those she judged unworthy...
  #         \nBut don't worry, kwwwwrk. I'll let you\nin on the trick to opening the gate."
  # - name: Remove end of Yerbal's text 1
  #   type: flowpatch
  #   index: 390
  #   flow:
  #     next: -1
  # - name: Remove end of Yerbal's text 2
  #   type: flowpatch
  #   index: 31
  #   flow:
  #     next: -1

204-ForestF3:
  - name: Talk to Water Dragon in Flooded Faron
    type: flowpatch
    index: 16
    flow:
      next: Check If Already Obtained Faron SotH Item
  - name: Check If Already Obtained Faron SotH Item
    type: switchadd
    flow:
      subType: 6
      param2: 16 # Received Faron SotH
      param3: 3
    cases:
      - Show Flooded Faron Exit Question # Already received item
      - 19
  - name: Exit mid tadtones
    type: flowpatch
    index: 20
    flow:
      next: Show Flooded Faron Exit Question
  - name: Show Flooded Faron Exit Question
    type: flowadd
    flow:
      type: type1
      next: Flooded Faron Exit Switch
      param3: 302
      param4: Flooded Faron Exit Question
  - name: Flooded Faron Exit Question
    type: textadd
    text: "Leaving so soon? I can drain the forest\nif you wish to return later.\n[1]Yes[2-]No"
  - name: Flooded Faron Exit Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Trigger Exit to Non-Flooded Faron # Yes
      - Show Continue With Tadtones Text # No
  - name: Continue With Tadtones Text
    type: textadd
    text: "Very well. Talk to me again if you\nchange your mind."
  - name: Show Continue With Tadtones Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: Continue With Tadtones Text
  - name: Trigger Exit to Non-Flooded Faron
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 5 # Entrance number
      param2: 0
      next: -1
      param3: 10 # Triggers an exit
  - name: Go to Faron SotH item
    type: flowpatch
    index: 160
    flow:
      next: Give item after Faron SotH CS
  - name: Give item after Faron SotH CS
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Trigger Exit to Non-Flooded Faron
      param3: 9
  # Gets unset in the Onp zev
  # TODO: Replace with a zev patch?
  - name: Make Bucha give the Tadtones Scroll storyflag
    type: flowpatch
    index: 195
    flow:
      param2: 82 # Tadtones Scroll storyflag
      param3: 0 # set (not unset) flag

250-ForestSiren:
  - name: shorten fi text
    type: flowpatch
    index: 1
    flow:
      next: 78

299-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 2
    flow:
      next: 3

300-Mountain:
  - name: Skip over Zelda Dowsing
    type: flowpatch
    index: 281
    flow:
      next: -1

301-MountainD1:
  - name: remove ghirahim text before scaldera
    type: flowpatch
    index: 82
    flow:
      next: 48
  - name: give item after beating earth temple
    type: flowpatch
    index: 22
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 20 # goes to beat ET story flag
      param3: 9
      param4: 0
      param5: 0
  - name: Prevent softlock on exit
    type: flowpatch
    index: 21
    flow:
      next: -1

302-Anahori:
  - name: To Mitts Check
    type: flowpatch
    index: 0
    flow:
      next: Mitts Check
  - name: Mitts Check
    type: switchadd
    flow:
      subType: 6
      param2: 904 # Rando storyflag for digging mitts
      param3: 3
    cases:
      - 19 # normal text
      - Show No Mitts Text
  - name: No Mitts Text
    type: textadd
    text: "You don't have Digging Mitts,\nso I can't let you play!"
  - name: Show No Mitts Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: No Mitts Text

303-MountainF2:
  - name: skip over Water Basin dowsing
    type: flowpatch
    index: 128
    flow:
      param2: 668
  - name: skip over Water Basin dowsing
    type: flowpatch
    index: 289
    flow:
      param2: 134

304-MountainD2:
  - name: Give item before CS
    type: flowpatch
    index: 5
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Give Fire Sanctuary beaten story flag
      param3: 9
      param4: 0
      param5: 0
  - name: Give Fire Sanctuary beaten story flag
    type: setstoryflag
    flow:
      setstoryflag: 901 # Fire Sanctuary beaten story flag
      next: Give zone flag for load zone
  - name: Give zone flag for load zone
    type: setzoneflag
    flow:
      setzoneflag: 3
      next: -1

305-MountainF3:
  - name: Boko Base entry
    type: flowpatch
    index: 64
    flow:
      next: Show Boko Base Entry Question
  - name: Boko Base exit
    type: flowpatch
    index: 72
    flow:
      next: Show Boko Base Exit Question
  - name: Show Boko Base Exit Question
    type: flowadd
    flow:
      type: type1
      next: Boko Base Exit Switch
      param3: 302
      param4: Boko Base Exit Question
  - name: Boko Base Exit Question
    type: textadd
    text: "Want to leave <b<Bokoblin Base>>?\n[1]Yes[2-]No"
  - name: Boko Base Exit Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Leave Boko Base # Yes
      - Show Declined Boko Base Offer Text # No (same as declined entry text)
  - name: Leave Boko Base
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0 # Entrance number for Eldin???
      param2: 0
      next: -1
      param3: 10 # Triggers an exit
  - name: Show Boko Base Entry Question
    type: flowadd
    flow:
      type: type1
      next: Boko Base Entry Switch
      param3: 302
      param4: Boko Base Entry Question
  - name: Boko Base Entry Question
    type: textadd
    text: "Want to enter <b<Bokoblin Base>>?\n[1]Yes[2-]No"
  - name: Boko Base Entry Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Entry into Boko Base # Yes
      - Show Declined Boko Base Offer Text # No
  - name: Declined Boko Base Offer Text
    type: textadd
    text: "Very well. Talk to me again if you\nchange your mind."
  - name: Show Declined Boko Base Offer Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: Declined Boko Base Offer Text
  - name: Entry into Boko Base
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0 # Entrance number for Boko Base
      param2: 0
      next: -1
      param3: 10 # Triggers an exit
  - name: Talking to Plats in Boko Base Prison
    type: flowpatch
    index: 1
    flow:
      next: Check if received Plats' Gift
  - name: Check if received Plats' Gift
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 177
      param3: 3
    cases:
      - Show Post Plats' Gift text # True
      - 2 # False
  - name: Post Plats' Gift text
    type: textadd
    text: "See ya around, pal!"
  - name: Show Post Plats' Gift text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: Post Plats' Gift text
  - name: Cut off Plats' text to give item
    type: flowpatch
    index: 2
    flow:
      next: Plats' Gift
  - name: Plats' Gift
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 39
      param3: 9
  - name: Shorten Plats text in hot cave
    type: flowpatch
    index: 25
    flow:
      next: 36
  - name: Go to Eldin SotH item
    type: flowpatch
    index: 28
    flow:
      next: Give item after Eldin SotH CS
  - name: Give item after Eldin SotH CS
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: -1
      param3: 9
  - name: Remove Fire Dragon's lore text after SotH item
    type: flowpatch
    index: 46
    flow:
      next: 47
  - name: Don't act differently when both other Dragons are already met
    type: flowpatch
    index: 31
    flow: {}
    cases:
      - 57
      - 57

399-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 0
    flow:
      next: 1

400-Desert:
  - name: Give item at end of LMF
    type: flowpatch
    index: 283
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Set storyflag for end of LMF item
      param3: 9
      param4: 0
      param5: 0
  - name: Set storyflag for end of LMF item
    type: setstoryflag
    flow:
      setstoryflag: 935
      next: -1
  - name: Fix Hook Beetle check # the robot doesn't give the item after harp
    type: flowpatch
    index: 39
    flow:
      next: 5
  - name: skip over Zelda dowsing
    type: flowpatch
    index: 133
    flow:
      next: -1

401-DesertD2:
  - name: remove skipper text after opening mast
    type: flowpatch
    index: 25
    flow:
      next: 50
  - name: give item after beating sandship
    type: flowpatch
    index: 45
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Give Sandship beaten story flag
      param3: 9
      param4: 0
      param5: 0
  - name: Give Sandship beaten story flag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 15 # Sandship beaten story flag
      next: Give rando Tentalus Defeated storyflag
      param3: 0
  - name: Give rando Tentalus Defeated storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 933 # set defeat tentalus storyflag
      next: Give SSH crest zoneflag
      param3: 0
  - name: Give SSH crest zoneflag
    type: setzoneflag
    flow:
      setzoneflag: 3
      next: -1
  - name: Fi text text to leave dungeon
    type: textadd
    unk1: 2
    text: "You can't beat this\ndungeon at the present\ntime, I would suggest\ncoming back later"
  - name: Fi trigger to leave
    type: entryadd
    entry:
      name: "401_18"
      value: Fi text to leave
  - name: Fi text to leave
    type: flowadd
    flow:
      type: type1
      next: set tentalus defeated storyflag
      param3: 171
      param4: 57
  - name: set tentalus defeated storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 933 # tentalus defeated
      next: Leave dungeon trigger
      param3: 0
  - name: Leave dungeon trigger
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 1 # exit
      param2: 0 # current room
      next: -1
      param3: 10

402-DesertF2:
  - name: Override Skipper check for first time conversation
    type: flowpatch
    index: 2
    flow:
      next: 150 # Check for SSH visible flag
  - name: Never ask player to go inside shark mouth for ship dowsing
    type: flowpatch
    index: 17
    flow:
      next: 276

404-DesertF3:
  - name: Don't act when both other Dragons are already met
    type: flowpatch
    index: 21
    flow: {}
    cases:
      - 79
      - 79
  - name: Set story flags from skipped cutscene
    type: flowpatch
    index: 165
    flow:
      next: Set when Thunder Dragon teaches SotH part story flag
  - name: Set when Thunder Dragon teaches SotH part story flag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 462 # Set when Thunder Dragon teaches SotH part story flag
      next: Thunder Dragon teaches SotH part story flag
      param3: 0
  - name: Thunder Dragon teaches SotH part story flag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 21 # Thunder Dragon teaches SotH part story flag
      next: 90
      param3: 0
  - name: Go to item
    type: flowpatch
    index: 139
    flow:
      next: give item after Healing Thunderdragon
  - name: give item after Healing Thunderdragon
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: -1
      param3: 9
  - name: Shorten Golo Text
    type: flowpatch
    index: 108
    cases:
      - 123
      - 128

460-RairyuMinigame:
  - name: Avoid Boss rush Entry
    type: entryadd
    entry:
      name: "460_70"
      value: display Thank you text
  - name: Thunderdragon Thank you text
    type: textadd
    text: "Thank you for saving me"
  - name: display Thank you text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 115
      param4: Thunderdragon Thank you text

499-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 6
    flow:
      next: 7

500-CenterField:
  - name: to SG intro cs storyflag
    type: flowpatch
    index: 114
    flow:
      next: Set SG intro in Groose cs
  - name: Set SG intro in Groose cs
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 137
      next: -1
      param3: 0
  - name: Zelda dowsing in Key Piece
    type: flowpatch
    index: 495
    flow:
      next: 492

501-Inpa:
  - name: botg context text
    type: textadd
    text: "I see you have acquired the <y<harp>>.\nWell done. Let me teach you a <b<song>>,\nit will be useful for your adventure."
  - name: show botg context text
    type: flowadd
    flow:
      type: type1
      next: set 2x20 in lieu of botg tutorial
      param3: 302
      param4: botg context text
  - name: botg cutscene skip to harp
    type: flowpatch
    index: 264
    flow:
      next: show botg context text
  - name: set 2x20 in lieu of botg tutorial
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 29
      param2: 10
      next: 267
      param3: 2
  - name: End after item get
    type: flowpatch
    index: 267
    flow:
      next: -1
  # - name: Raise GoT
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 340 # Raise GoT
  #     next: 267
  #     param3: 0

  # - name: Groose 1
  #   type: flowpatch
  #   index: 56
  #   flow:
  #     next: Set sf 1
  # - name: Set sf 1
  #   type: setsceneflag
  #   flow: 
  #     sceneindex: 10
  #     setsceneflag: 28 # groose cs watched
  #     next: Set sf 2
  # - name: Set sf 2
  #   type: setsceneflag
  #   flow:
  #     sceneindex: 10
  #     setsceneflag: 21 # botg played
  #     next: -1

502-CenterFieldBack:
  - name: Zelda's Cutscene, give item from impa # this is overriding a set sceneflag, which is not needed anymore
    type: flowpatch
    index: 17
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 16
      param3: 9
      param4: 0
      param5: 0
  - name: Yeet TMS Cutscene
    type: flowpatch
    index: 16
    flow:
      next: Give watched TMS Cutscene storyflag
  - name: Give watched TMS Cutscene storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 350 # TMS watched story flag
      next: -1
      param3: 0
  - name: Patch Fi text before Demise
    onlyif: skip_demise == on
    type: textpatch
    index: 23
    text: "Master <heroname>, I have\nimportant information for you.\n\n\nMy analysis indicates a 100% chance\nthat entering this portal will\n<r<conclude>> your journey.\n\nAre you ready to proceed?\n[1]I'm ready![2-]Not yet..."
  - name: Patch Fi text before Demise 2
    onlyif: skip_demise == on
    type: textpatch
    index: 25
    text: "Understood, Master <heroname>.\nThank you for taking me on this\njourney with you."
  - name: Impa Complete Triforce text
    type: textadd
    text: "Though your wish has been granted by\nthe <y+<Triforce>>, <b<Ghirahim>> escaped with\nZelda through the <r<great doors\nat the front of the temple>>.\nYou may yet catch him before it's too\nlate. Hurry, <heroname>!"
  - name: Show Triforce text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 302
      param4: Impa Complete Triforce text
  - name: Check for Triforces
    type: entryadd
    entry:
      name: "502_20"
      value: Show Triforce text

  # - name: Raise GoT Entry
  #   type: entryadd
  #   entry:
  #     name: "502_21"
  #     value: Raise GoT
  # - name: Raise GoT
  #   type: setstoryflag
  #   flow:
  #     setstoryflag: 340 # Raise GoT
  #     next: Set imp2 beat storyflag
  # - name: Set imp2 beat storyflag
  #   type: setstoryflag
  #   flow:
  #     setstoryflag: 132 # Beat imp2
  #     next: -1

503-Goron:
  - name: To Bomb Bag Check I # when you don't have bow
    type: flowpatch
    index: 255
    flow:
      next: Bomb Bag Check I 1
  - name: Bomb Bag Check I 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 92 # Bomb Bag itemflag
      param2: 1 # check it's set
      next: Bomb Bag Check I 2
      param3: 23 # for checking a itemflag
  - name: Bomb Bag Check I 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - 122 # true, continue with bomb as drawing quest
      - 224  # false, go to random select
  - name: To Bomb Bag Check II # when you do have bow
    type: flowpatch
    index: 259
    flow:
      next: Bomb Bag Check II 1
  - name: Bomb Bag Check II 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 92 # Bomb Bag itemflag
      param2: 1 # check it's set
      next: Bomb Bag Check II 2
      param3: 23 # for checking a itemflag
  - name: Bomb Bag Check II 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - 116 # true, continue with bomb as drawing quest
      - 261  # false, go to random select

599-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 6
    flow:
      next: 7
