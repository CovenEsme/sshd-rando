# 002-System

003-ItemGet:
  - name: Tadtone Entry
    type: entryadd
    entry:
      name: "003_214"
      value: Increment Tadtone Counter
  - name: Increment Tadtone Counter
    type: flowadd
    flow:
      type: type3
      next: Check for all Tadtones
      param1: 953 # flag
      param2: 1 # increment counter
      param3: 74 # custom command: increment tadtone group counter
  - name: Check for all Tadtones
    type: flowadd
    flow:
      type: type3
      next: Switch for all Tadtones
      param1: 0
      param2: 0
      param3: 75 # custom command: get tadtones groups remaining
  - name: Switch for all Tadtones
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous check
    cases:
      - Show all Tadtones Collected text
      - Show some Tadtones Collected text
  - name: Some Tadtones Collected text
    type: textadd
    unk1: 5
    unk2: 1
    text: "You got a group of <y<Tadtones>>!\nOnly <r<<numeric arg0> >> left to find!"
  - name: Show some Tadtones Collected text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 3
      param4: Some Tadtones Collected text
  - name: All Tadtones Collected text
    type: textadd
    unk1: 5
    unk2: 1
    text: "You got the last group of <y<Tadtones>>!\nYou found every last one of them!
          \n\n\nHurry to <b<Flooded Faron Woods>> and talk\nto the <r<Water Dragon>> to claim your\nreward."
  - name: Show all Tadtones Collected text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 3
      param4: All Tadtones Collected text
  - name: Spiral Charge Text
    type: textpatch
    index: 27
    text: "You learned the <y<Spiral Charge>>!"
  - name: Change Spiral Charge Scene change
    type: flowpatch
    index: 584 # change it to give Spiral Charge Storyflag
    flow:
      subType: 0
      param1: 0
      param2: 364
      param3: 0
  - name: Remove Goddess Sword Scene change
    type: flowpatch
    index: 462 # skip scene change after getting goddess sword
    flow:
      next: -1
  - name: Remove bipping after practice sword
    type: flowpatch
    index: 383
    flow:
      next: -1
  - name: Remove Triforce of Wisdom Scene change (1st part)
    type: flowpatch
    index: 531
    flow:
      next: -1
  - name: Remove Triforce of Wisdom Scene change (2nd part)
    type: flowpatch
    index: 532
    flow:
      next: -1
  - name: Remove Triforce of Courage Scene change (1st part)
    type: flowpatch
    index: 534
    flow:
      next: -1
  - name: Remove Triforce of Courage Scene change (2nd part)
    type: flowpatch
    index: 535
    flow:
      next: -1
  - name: Remove Triforce of Power Scene change (1st part)
    type: flowpatch
    index: 536
    flow:
      next: -1
  - name: Remove Triforce of Power Scene change (2nd part)
    type: flowpatch
    index: 537
    flow:
      next: -1
  # don't currently have option
  # - name: Give Dowsings after Whitesword
  #   type: flowpatch
  #   onlyif: Option "dowsing-after-whitesword" Enabled
  #   index: 542
  #   flow:
  #     next: Rupee Dowsing
  # - name: Rupee Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 105 # Rupee Dowsing
  #     next: Crystal Dowsing
  #     param3: 0
  # - name: Crystal Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 104 # Crystal Dowsing
  #     next: Treasure Dowsing
  #     param3: 0
  # - name: Treasure Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 102 # Treasure Dowsing
  #     next: Goddess Cube Dowsing
  #     param3: 0
  # - name: Goddess Cube Dowsing
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 0
  #     param1: 0
  #     param2: 110 # Goddess Cube Dowsing
  #     next: Open Dowsing Wheel
  #     param3: 0
  # - name: Open Dowsing Wheel
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 19 # Crystal blinks
  #     next: -1
  #     param3: 56
  - name: Goddess Longsword Text
    type: textpatch
    index: 16
    text: "You got the <y<Goddess Longsword>>!\nThe flames of Farore have improved your\nsword, making it longer and sharp enough\nto do twice as much damage!"
  - name: Goddess White Sword Text
    type: textpatch
    index: 12
    text: "You got the <y<Goddess White Sword>>!\nThe flames of Nayru have transformed\nyour blade, expanding Fi's powers.\n\nShe can now help you use your <r<dowsing>>\nability to search for more objects!"
  - name: Master Sword Text
    type: textpatch
    index: 17
    text: "You got the <y<Master Sword>>!\nThe flames of Din have imbued your\nblade with a sacred white light that\ndemons revile."
  - name: True Master Sword Text
    type: textpatch
    index: 19
    text: "You got the <y<True Master Sword>>!\nThe goddess has blessed your blade, and\nthe Master Sword has at last achieved its\nultimate form!"
  - name: Harp Text
    type: textpatch
    index: 21
    text: "You got the <y<Goddess's Harp>>!\nBut there's no time to admire it!"
  - name: Emerald Tablet text
    type: textpatch
    index: 227
    text: "You got the <y<Emerald Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Ruby Tablet text
    type: textpatch
    index: 228
    text: "You got the <y<Ruby Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Amber Tablet text
    type: textpatch
    index: 229
    text: "You got the <y<Amber Tablet>>!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Farore's Courage Text
    type: textpatch
    index: 237
    text: "You learned <y<Farore's Courage>>!"
  - name: Nayru's Wisdom Text
    type: textpatch
    index: 238
    text: "You learned <y<Nayru's Wisdom>>!"
  - name: Din's Power Text
    type: textpatch
    index: 239
    text: "You learned <y<Din's Power>>!"
  - name: Faron SotH text
    type: textpatch
    index: 240
    text: "You learned the <y<Water Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Eldin SotH text
    type: textpatch
    index: 241
    text: "You learned the <y<Fire Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Lanayru SotH text
    type: textpatch
    index: 242
    text: "You learned the <y<Thunder Dragon's Song>>!\nThis is a part of the <y<Song of the Hero>>!"
  - name: Full SotH text
    type: textpatch
    index: 243
    text: "The <y<Song of the Hero>> is now complete!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 45 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got <r<five>> <y<Gratitude Crystals>>!\nThat is <r<<numeric arg1> >>in Total!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 62 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got <r<one>> <y<Gratitude Crystal>>!\nThat is <r<<numeric arg1> >>in Total!"
  - name: Zelda dowsing in Key Piece
    type: flowpatch
    index: 677
    flow:
      next: -1
  - name: remove BotG Scene Change # also goes to open thunderhead
    type: flowpatch
    index: 464
    flow:
      next: BotG opens Thunderhead
  - name: BotG opens Thunderhead
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 194
      next: -1
      param3: 0
  - name: get rid of Skyloft layer 8&9
    type: flowpatch
    index: 540 # before storyflag
    flow:
      next: -1 # after Storyflag
  - name: Go to Harp Storyflag
    type: flowpatch
    index: 71
    flow:
      next: Goddess Harp Storyflag
  - name: Goddess Harp Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 9
      next: Groose lands in Faron Storyflag
      param3: 0
  - name: Groose lands in Faron Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 140
      next: -1
      param3: 0
  - name: Go to Letter Storyflag
    type: flowpatch
    index: 377
    flow:
      next: Letter Storyflag
  - name: Letter Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 547
      next: -1
      param3: 0
  - name: Go to Horned Colossus Beetle Storyflag
    type: flowpatch
    index: 380
    flow:
      next: Horned Colossus Beetle Storyflag
  - name: Horned Colossus Beetle Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 476
      next: -1
      param3: 0
  # full SotH will be given once all 3 Parts are collected
  - name: For Faron To Check Full SotH
    type: flowpatch
    index: 472
    flow:
      next: Check Faron SotH 1
  - name: For Eldin To Check Full SotH
    type: flowpatch
    index: 471
    flow:
      next: Check Faron SotH 1
  - name: For Lanayru To Check Full SotH
    type: flowpatch
    index: 475
    flow:
      next: Check Faron SotH 1
  - name: Check Faron SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 190 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Faron SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Faron SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Eldin SotH 1 # true
      - -1                 # false
  - name: Check Eldin SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 191 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Eldin SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Eldin SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Lanayru SotH 1 # true
      - -1                   # false
  - name: Check Lanayru SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 192 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Lanayru SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Lanayru SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Give full SotH # true
      - -1             # false
  - name: Give full SotH
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 193 # item
      param3: 9
      next: 477 # to full SotH text
  - name: To Set Adventure Pouch Storyflag
    type: flowpatch
    index: 603
    flow:
      next: Set Adventure Pouch Storyflag
  - name: Set Adventure Pouch Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 30 # adventure pouch unlocked
      next: -1
      param3: 0
  - name: To Set Adventure Pouch counter
    type: flowpatch
    index: 604
    flow:
      next: Add pouch slot
  - name: Add pouch slot
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 490 # counterindex
      param2: 1 # count
      next: -1
      param3: 25 # add to counter command
  - name: To Set Faron Pillar Storyflag
    type: flowpatch
    index: 385
    flow:
      next: Set Faron Pillar Storyflag
  - name: Set Faron Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 46 # Faron Pillar
      next: -1
      param3: 0
  - name: To Set Eldin Pillar Storyflag
    type: flowpatch
    index: 384
    flow:
      next: Set Eldin Pillar Storyflag
  - name: Set Eldin Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 47 # Eldin Pillar
      next: -1
      param3: 0
  - name: To Set Lanayru Pillar Storyflag
    type: flowpatch
    index: 389
    flow:
      next: Set Lanayru Pillar Storyflag
  - name: Set Lanayru Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 48 # Lanayru Pillar
      next: -1
      param3: 0
  - name: Always same Bomb text
    type: flowpatch
    index: 180
    flow:
      next: 161
  - name: To Fill Bombs
    type: flowpatch
    index: 161
    flow:
      next: Fill Bombs
  - name: Fill Bombs
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 499 # counterindex
      param2: 10 # count
      next: 414
      param3: 25 # add to counter command
  - name: Sea Chart unlocks Ship Dowsing
    type: flowpatch
    index: 528
    flow:
      next: Sea Chart dowsing
  - name: Sea Chart dowsing
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 271 # Ship Dowsing
      next: Open Dowsing wheel
      param3: 0
  - name: Open Dowsing wheel
    type: flowadd
    flow:
      type: type3
      subType: 6
      param1: 0
      param2: 7
      next: -1
      param3: 56
  - name: Remove open map demo after dungeon map
    type: flowpatch
    index: 613
    flow:
      next: -1
  - name: Remove bipping after getting slingshot
    type: flowpatch
    index: 520
    flow:
      next: -1
  # don't currently have option
  # - name: Patch Medium Wallet
  #   onlyif: Option "full-wallet-upgrades" Enabled
  #   type: flowpatch
  #   index: 246
  #   flow:
  #     next: Fill Medium Wallet
  # - name: Fill Medium Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 200 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Big Wallet
  #   onlyif: Option "full-wallet-upgrades" Enabled
  #   type: flowpatch
  #   index: 245
  #   flow:
  #     next: Fill Big Wallet
  # - name: Fill Big Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 500 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Giant Wallet
  #   onlyif: Option "full-wallet-upgrades" Enabled
  #   type: flowpatch
  #   index: 244
  #   flow:
  #     next: Fill Giant Wallet
  # - name: Fill Giant Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 4000 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Tycoon Wallet
  #   onlyif: Option "full-wallet-upgrades" Enabled
  #   type: flowpatch
  #   index: 255
  #   flow:
  #     next: Fill Tycoon Wallet
  # - name: Fill Tycoon Wallet
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 4000 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count
  # - name: Patch Extra Wallets
  #   onlyif: Option "full-wallet-upgrades" Enabled
  #   type: flowpatch
  #   index: 497
  #   flow:
  #     next: Fill Extra Wallets
  # - name: Fill Extra Wallets
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 0
  #     param2: 300 # Rupees to add
  #     next: -1
  #     param3: 8 # Increase rupee count

004-Object:
  - name: Remove Heart piece hint from gossip stone
    type: flowpatch
    index: 76
    flow:
      next: -1
  - name: Force text for lower platform cave hint
    type: flowpatch
    index: 57
    flow:
      next: 56
  - name: Force text for upper platform cave hint
    type: flowpatch
    index: 31
    flow:
      next: 30

# 006-8KenseiNormal
# 008-Hint

101-Shop:
  - name: Remove pouch bipping after item seller
    type: flowpatch
    index: 89
    flow:
      next: 116

102-Zelda:
  - name: Fledge Quest Switch 1
    type: flowpatch
    index: 230
    flow:
      param2: 36 # always trigger
  - name: Fledge Quest Switch 2
    type: flowpatch
    index: 229
    flow:
      param2: 36 # always trigger

105-Terry:
  - name: Beedle's Crystal # Can't reach that right now
    type: flowpatch
    index: 115
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Can't buy Pouch text
    type: textadd
    text: "You need an <y<Adventure Pouch>> to buy\nthis!"
  - name: Show can't buy Pouch text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 87
      param4: Can't buy Pouch text
  - name: Check for Pouch
    type: switchadd
    flow:
      subType: 6
      param2: 30 # Adventure pouch unlocked
      param3: 3
    cases:
      - 43 # do event as normal
      - Show can't buy Pouch text
  - name: go to Check for Pouch
    # onlyif: Option "shopsanity" Disabled
    type: flowpatch
    index: 16
    flow:
      next: Check for Pouch
  # shopsanity option stuff
  # - name: Second 100 Rupee Item
  #   onlyif: Option "shopsanity" Enabled
  #   type: entryadd
  #   entry:
  #     name: "105_39"
  #     value: Second 100R first event
  # - name: Second 100R first event
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 1
  #     next: Second 100R second event
  #     param3: 12
  # - name: Second 100R second event
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 4
  #     param1: 0
  #     param2: 21
  #     next: Second 100R discount switch 1
  #     param3: 13
  # - name: Second 100R discount switch 1
  #   onlyif: Option "shopsanity" Enabled
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 478 # Already used discount
  #     param3: 3
  #   cases:
  #     - Show Second 100R undiscounted Text
  #     - Second 100R discount switch 2
  # - name: Second 100R discount switch 2
  #   onlyif: Option "shopsanity" Enabled
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 477 # Gave Beedles Beetle, has discount
  #     param3: 3
  #   cases:
  #     - Show Second 100R discounted Text
  #     - Show Second 100R undiscounted Text
  # - name: Show Second 100R undiscounted Text
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Second 100R undiscounted Text
  # - name: Show Second 100R discounted Text
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Second 100R discounted Text
  # - name: Third 100 Rupee Item
  #   onlyif: Option "shopsanity" Enabled
  #   type: entryadd
  #   entry:
  #     name: "105_40"
  #     value: Third 100R first event
  # - name: Third 100R first event
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 6
  #     param1: 0
  #     param2: 1
  #     next: Third 100R second event
  #     param3: 12
  # - name: Third 100R second event
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 4
  #     param1: 0
  #     param2: 21
  #     next: Third 100R discount switch 1
  #     param3: 13
  # - name: Third 100R discount switch 1
  #   onlyif: Option "shopsanity" Enabled
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 478 # Already used discount
  #     param3: 3
  #   cases:
  #     - Show Third 100R undiscounted Text
  #     - Third 100R discount switch 2
  # - name: Third 100R discount switch 2
  #   onlyif: Option "shopsanity" Enabled
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 477 # Gave Beedles Beetle, has discount
  #     param3: 3
  #   cases:
  #     - Show Third 100R discounted Text
  #     - Show Third 100R undiscounted Text
  # - name: Show Third 100R undiscounted Text
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Third 100R undiscounted Text
  # - name: Show Third 100R discounted Text
  #   onlyif: Option "shopsanity" Enabled
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: 13 # buying switch
  #     param3: 87
  #     param4: Third 100R discounted Text

106-DrugStore:
  - name: Potion Lady Text Patch # generalized for rando
    type: textpatch
    index: 5
    text: "Just so you know, I can't sell you a \npotion if you don't have an Empty \nBottle to pour it into!\n\n\x0E\x01\x09\x04\x09\x90For some reason, I like you, though, so\nI'll give you a spare item I've\nbeen keeping here in the stall!\nOh, it's nothing. It's my little gift."
  - name: Potion Lady Bottle # skip pouch requirements
    type: flowpatch
    index: 42
    flow:
      next: 44 # give item
  - name: Requirement for Stamina Potion
    type: flowpatch
    index: 103
    flow:
      param2: 8 # raised LMF
  - name: Remove pouch bipping from Potion Lady
    type: flowpatch
    index: 115
    flow:
      next: 111

107-Kanban:
  - name: Fi give Goddess Statue items
    type: flowpatch
    index: 12
    flow:
      next: Fi give Goddess Statue item 1
  - name: Fi give Goddess Statue item 1
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: Fi give Goddess Statue item 2
      param3: 9
  - name: Fi give Goddess Statue item 2
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: -1
      param3: 9

108-ShinkanA:
  - name: Owlans Shield
    type: flowpatch
    index: 168
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 172 # end of owlans text
      param3: 9
      param4: 0
      param5: 0
  - name: Remove bipping after Owlan's Gift
    type: flowpatch
    index: 165
    flow:
      next: -1
  - name: Hint to owlan crystals
    type: flowpatch
    index: 271
    flow:
      param2: 57 # changes switch condition to kikwi elder slingshot storyflag
  - name: Does not have slingshot
    type: textpatch
    index: 68 # switch is false
    text: "\x0E\x01\x09\x04\x00\x01By the way, <heroname>, I have been \nlooking for new sources of research\nabout <b<plant life>>.\n\nIf you ever find something, please meet\nme <r<in the Knight Academy>>!"
  - name: Does have slingshot
    type: textpatch
    index: 69 # switch is true
    text: "\x0E\x01\x09\x04\x00\x01Oh, <heroname>, something tells me you\nmight know some <b<plant life>> I could\nresearch! Please meet me \n<r<in the Knight Academy>>!"

109-TakeGoron:
  - name: Peater's Crystal 1
    type: flowpatch
    index: 79
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Peater's Crystal 2
    type: flowpatch
    index: 92
    flow:
      next: 79
  - name: To Sword Check
    # prevent playing bamboo cutting without any sword
    type: flowpatch
    index: 35
    flow: {}
    cases:
      - Sword Check # soup has been delivered, normal event
      - 37 # no
  - name: Sword Check
    type: switchadd
    flow:
      subType: 6
      param2: 906 # Rando storyflag for practice sword
      param3: 3
    cases:
      - 36 # normal text
      - Show No Sword Text
  - name: No Sword Text
    type: textadd
    text: "You don't have a Sword,\nso I can't let you play!"
  - name: Show No Sword Text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 109
      param4: No Sword Text

110-DivingGame:
  - name: Shorten Dodoh quest start text
    type: flowpatch
    index: 49
    flow:
      next: 55
  - name: Fun Fun Owner's Quest requirement
    type: flowpatch
    index: 38
    flow:
      param2: 36 # always trigger
  - name: Fun Fun Owner's Crystal
    type: flowpatch
    index: 60
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0

111-FortuneTeller:
  - name: Skip over Water Basin dowsing
    type: flowpatch
    index: 99
    flow:
      param2: 668
  - name: Skip over Wheel opening
    type: flowpatch
    index: 104
    flow:
      param2: 96

113-RemodelStore:
  - name: Change switch for getting Treasure Dowsing
    type: flowpatch
    index: 143
    flow:
      param2: 909 # Whitesword
  # don't have option yet
  # - name: remove Treasure Dowsing 1
  #   onlyif: Option "dowsing-after-whitesword" Enabled
  #   type: flowpatch
  #   index: 123
  #   flow:
  #     next: -1
  # - name: remove Treasure Dowsing 2
  #   onlyif: Option "dowsing-after-whitesword" Enabled
  #   type: flowpatch
  #   index: 13
  #   flow:
  #     next: -1

# need to clean up
114-Friend:
  - name: Skip Fledge camera panning 1
    type: flowpatch
    index: 15
    flow:
      next: 22
  - name: Skip Fledge talking about the hero's tunic
    type: flowpatch
    index: 22
    flow:
      next: 51
  - name: Skip Fledge wait frames
    type: flowpatch
    index: 51
    flow:
      next: 50
  - name: Skip more Fledge camera panning
    type: flowpatch
    index: 50
    flow:
      next: 16
  - name: Skip Fledge talking about the Adventure Pouch # skips part explaining the adventure pouch
    type: flowpatch
    index: 16
    flow:
      next: Set bwheel storyflag
  - name: Set bwheel storyflag
    type: setstoryflag
    flow:
      setstoryflag: 58
      next: Set tunic storyflag
  - name: Set tunic storyflag
    type: setstoryflag
    flow:
      setstoryflag: 36
      next: Set loftwing storyflag
  - name: Set loftwing storyflag
    type: setstoryflag
    flow:
      setstoryflag: 27
      next: Set can jump off loftwing storyflag
  - name: Set can jump off loftwing storyflag
    type: setstoryflag
    flow:
      setstoryflag: 198
      next: Set upper academy gate/sparring hall open sceneflag
  - name: Set upper academy gate/sparring hall open sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 21
      sceneindex: 0
      next: Set LA gates sceneflag
  - name: Set LA gates sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 0
      sceneindex: 0
      next: Set hero mode storyflag
  - name: Set hero mode storyflag
    type: setstoryflag
    flow:
      setstoryflag: 226
      next: Set emerald tablet storyflag
  - name: Set emerald tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 46
      next: Set ruby tablet storyflag
  - name: Set ruby tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 47
      next: Set amber tablet storyflag
  - name: Set amber tablet storyflag
    type: setstoryflag
    flow:
      setstoryflag: 48
      next: Set sailcloth storyflag
  - name: Set sailcloth storyflag
    type: setstoryflag
    flow:
      setstoryflag: 32
      next: Set botg storyflag
  - name: Set botg storyflag
    type: setstoryflag
    flow:
      setstoryflag: 194
      next: Set spiral charge storyflag
  - name: Set spiral charge storyflag
    type: setstoryflag
    flow:
      setstoryflag: 364
      next: Set UA doors sceneflag
  - name: Set UA doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 1
      sceneindex: 0
      next: Set after tunic sceneflag
  - name: Set after tunic sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 8
      sceneindex: 0
      next: Set eye cs sceneflag
  - name: Set eye cs sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 26
      sceneindex: 0
      next: Set bat doors sceneflag
  - name: Set bat doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 66
      sceneindex: 0
      next: Set inside US doors sceneflag
  - name: Set inside US doors sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 67
      sceneindex: 0
      next: Set ruby fi text sceneflag
  - name: Set ruby fi text sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 95
      sceneindex: 0
      next: Set amber fi text sceneflag
  - name: Set amber fi text sceneflag
    type: setsceneflag
    flow:
      setsceneflag: 96
      sceneindex: 0
      next: Set gate to faron storyflag
  - name: Set gate to faron storyflag
    type: setstoryflag
    flow:
      setstoryflag: 494
      next: Bow storyflag
  - name: Bow storyflag
    type: setstoryflag
    flow:
      setstoryflag: 944
      next: Give bow
  - name: Give bow
    type: setitemflag
    flow:
      itemid: 19
      next: Give tms
  - name: Give tms
    type: setitemflag
    flow:
      itemid: 14
      next: Give sailcloth
  - name: Give sailcloth
    type: setitemflag
    flow:
      itemid: 15
      next: Give harp
  - name: Give harp
    type: setitemflag
    flow:
      itemid: 16
      next: Give clawshots
  - name: Give clawshots
    type: setitemflag
    flow:
      itemid: 20
      next: Give bellows
  - name: Give bellows
    type: setitemflag
    flow:
      itemid: 49
      next: Give slingshot
  - name: Give slingshot
    type: setitemflag
    flow:
      itemid: 52
      next: Give beetle
  - name: Give beetle
    type: setitemflag
    flow:
      itemid: 53
      next: Give heetle
  - name: Give heetle
    type: setitemflag
    flow:
      itemid: 75
      next: Give queetle
  - name: Give queetle
    type: setitemflag
    flow:
      itemid: 76
      next: Give teetle
  - name: Give teetle
    type: setitemflag
    flow:
      itemid: 77
      next: Give mitts
  - name: Give mitts
    type: setitemflag
    flow:
      itemid: 56
      next: Give mogmitts
  - name: Give mogmitts
    type: setitemflag
    flow:
      itemid: 99
      next: Give scale
  - name: Give scale
    type: setitemflag
    flow:
      itemid: 68
      next: Give net
  - name: Give net
    type: setitemflag
    flow:
      itemid: 71
      next: Give bombs
  - name: Give bombs
    type: setitemflag
    flow:
      itemid: 92
      next: Give whip
  - name: Give whip
    type: setitemflag
    flow:
      itemid: 137
      next: Give fse
  - name: Give fse
    type: setitemflag
    flow:
      itemid: 138
      next: -1

115-Town2:
  - name: Shorten Karane letter text
    type: flowpatch
    index: 592
    flow:
      next: 612
  - name: Shorten Pipit letter text
    type: flowpatch
    index: 92
    flow:
      next: 121
  - name: Shorten letter cutscene
    type: flowpatch
    index: 365
    flow:
      next: 377
  - name: Parrow's Empty Bottle
    type: flowpatch
    index: 734
    flow:
      next: 735 # jump to give item
  - name: Parrow's Spores Bottle
    type: flowpatch
    index: 199
    flow:
      next: 746 # to item
  - name: Parrow's Crystal 1
    type: flowpatch
    index: 813
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Parrow's Crystal 2
    type: flowpatch
    index: 787
    flow:
      next: 813
  - name: Feldge's Crystal
    type: flowpatch
    index: 325
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Baby's Crystal
    type: flowpatch
    index: 125
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Orrielle's Crystal
    type: flowpatch
    index: 225
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Ghost's Crystal
    type: flowpatch
    index: 522
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Crystal
    type: flowpatch
    index: 641
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Skip Clawshots Requirement for Rattle Delivery
    type: flowpatch
    index: 7
    flow:
      next: 8
  - name: Change Cawlin storyflag
    type: flowpatch
    index: 165
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 33
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 141
    flow:
      param2: 36 # always trigger
      param3: 3 # check Storyflag
  - name: add Cawlin storyflag to other text options
    type: flowpatch
    index: 507
    flow:
      next: 503
  # needs asm change to work
  # - name: to rerandomize treasure question
  #   type: flowpatch
  #   index: 410
  #   flow:
  #     next: Show Rerandomize Treasure Question
  # - name: Rerandomize Treasure Question
  #   type: textadd
  #   text: "Want to sell something different?\n[1]Yes[2-]No"
  # - name: Show Rerandomize Treasure Question
  #   type: flowadd
  #   flow:
  #     type: type1
  #     next: Treasure Question Switch
  #     param3: 115
  #     param4: Rerandomize Treasure Question
  # - name: Rerandomize Treasure
  #   type: flowadd
  #   flow:
  #     type: type3
  #     subType: 1
  #     param1: 9 # custom actor action done with asm
  #     param2: 0 # item
  #     param3: 33 # make actor do something
  #     next: 495 # ask to buy again
  #     param4: 0
  #     param5: 0
  # - name: Treasure Question Switch
  #   type: switchadd
  #   flow:
  #     subType: 6
  #     param2: 0
  #     param3: 0
  #   cases:
  #     - Rerandomize Treasure
  #     - -1
  - name: Skip to end of fledge 2
    type: flowpatch
    index: 347 # after giving fledge the second stamina potion
    flow:
      next: 353
  - name: Skip Fledge 3
    type: flowpatch
    index: 353
    flow:
      next: 320 # before crystal itemget

