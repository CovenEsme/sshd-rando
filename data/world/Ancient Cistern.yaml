
- name: Ancient Cistern Lobby
  dungeon: Ancient Cistern
  dungeon_starting_area: true
  events:
    Can Pull Waterfall Lever: Whip
  exits:
    AC East Rooms: Nothing
    AC Lobby After Whip Hooks: Whip
    AC Lobby Vines Area: can_access(AC Lobby Vines Area) and Whip # Turn on the geyser
    AC Behind the Waterfall: Water_Dragons_Scale and 'Can_Pull_Waterfall_Lever'
    AC Inside Statue: count(2, Ancient_Cistern_Small_Key) or small_keys == removed or 'Can_Lower_Giant_Statue'
    Floria Waterfall Temple Ledge: Nothing
  locations:
    Ancient Cistern - Rupee in East Hand: Water_Dragons_Scale
    Ancient Cistern - Rupee in West Hand: Water_Dragons_Scale


- name: AC Lobby After Whip Hooks
  dungeon: Ancient Cistern
  exits:
    AC Lobby Vines Area: Clawshots
    AC Back Room: can_access(AC Back Room)
    Ancient Cistern Lobby: Nothing
  locations:
    Ancient Cistern - Chest after Whip Hooks: Nothing


- name: AC Lobby Vines Area
  dungeon: Ancient Cistern
  events:
    Can Lower Giant Statue: Whip
    Can Pull Waterfall Lever: logic_ac_lever_jump_trick
  exits:
    # Can front hop and jump slash
    AC Lobby After Whip Hooks: Sword and logic_ac_map_chest_jump
    Ancient Cistern Lobby: Nothing
  locations:
    Ancient Cistern - Chest near Vines: Nothing


- name: AC Behind the Waterfall
  dungeon: Ancient Cistern
  exits:
    AC Red Pipe Basement: Whip
  locations:
    Ancient Cistern - Chest behind the Waterfall: Nothing


- name: AC Red Pipe Basement
  dungeon: Ancient Cistern
  exits:
    AC Red Pipe Basement Past Skulltula: (Beetle or Bow) and Water_Dragons_Scale # or Ancient Cistern - Basement Lilypad Clip Trick)


- name: AC Red Pipe Basement Past Skulltula
  dungeon: Ancient Cistern
  exits:
    AC Red Pipe Basement: Water_Dragons_Scale
    AC Back Room: count(2, Ancient_Cistern_Small_Key) or small_keys == removed
  locations:
    Ancient Cistern - Bokoblin: Whip


- name: AC Back Room
  dungeon: Ancient Cistern
  exits:
    AC Lobby After Whip Hooks: Nothing
    AC Lobby Vines Area: Whip and Water_Dragons_Scale
  locations:
    Ancient Cistern - Rupee under Lilypad: Water_Dragons_Scale # Flip lilypad and swim under


- name: AC Spider Thread Area
  dungeon: Ancient Cistern
  events:
    Can Freely Raise and Lower Statue: Whip
  exits:
    AC Basement Spider Thread: Nothing
    AC Lobby Vines Area: Nothing
    Ancient Cistern Lobby: Nothing
    

- name: AC East Rooms
  dungeon: Ancient Cistern
  exits:
    Ancient Cistern Lobby: Nothing
  locations:
    Ancient Cistern - Rupee in East Part in Cubby: Can_Unlock_Combination_Lock and Water_Dragons_Scale
    Ancient Cistern - First Rupee in East Part in Short Tunnel: Can_Unlock_Combination_Lock and Water_Dragons_Scale
    Ancient Cistern - Second Rupee in East Part in Short Tunnel: Can_Unlock_Combination_Lock and Water_Dragons_Scale
    Ancient Cistern - Third Rupee in East Part in Short Tunnel: Can_Unlock_Combination_Lock and Water_Dragons_Scale
    Ancient Cistern - Rupee in East Part in Main Tunnel: Can_Unlock_Combination_Lock and Water_Dragons_Scale
    Ancient Cistern - Chest in East Part: Can_Unlock_Combination_Lock and Water_Dragons_Scale


# Implies statue is lowered
- name: AC Basement
  dungeon: Ancient Cistern
  exits:
    AC Inside Statue: Nothing
    AC Basement Rotating Vines: (Whip and (Hook_Beetle or (Bomb_Bag and logic_bomb_throws))) or Clawshots # TODO: Damage Multiplier Check?
    AC Under the Statue: "'Can_Freely_Raise_and_Lower_Statue'"


- name: AC Basement Rotating Vines
  dungeon: Ancient Cistern
  exits:
    AC Basement: Nothing
    AC Basement Spider Thread: Whip


- name: AC Basement Spider Thread
  dungeon: Ancient Cistern
  exits:
    AC Basement: Nothing
    AC Spider Thread Area: Nothing


# Implies statue is raised
- name: AC Under the Statue
  dungeon: Ancient Cistern
  events:
    Can_Lower_Giant_Statue: Nothing
  exits:
    AC Basement: Nothing
  locations:
    Ancient Cistern - Chest under Stone Statue: "'Can_Lower_Giant_Statue'"


- name: AC Inside Statue
  dungeon: Ancient Cistern
  exits:
    AC Basement: "'Can_Lower_Giant_Statue'"
    Ancient Cistern Lobby: Whip
    AC Platform Before Boss: (Ancient_Cistern_Boss_Key or boss_keys == removed) and Whip
  locations:
    Ancient Cistern - Chest in Key Locked Room: (count(2, Ancient_Cistern_Small_Key) or small_keys == removed) and (Can_Defeat_Stalmaster or 'Can_Lower_Giant_Statue')
    

- name: AC Platform Before Boss
  dungeon: Ancient Cistern
  exits:
    Ancient Cistern Boss Room: Nothing
    Ancient Cistern Lobby: Nothing

# Not explicitly part of the dungeon incase boss entrances are randomized
- name: Ancient Cistern Boss Room
  exits:
    AC Platform Before Boss: Can_Defeat_Koloktos
    Ancient Cistern Flame Room: Can_Defeat_Koloktos
  locations:
    Ancient Cistern - Defeat Boss: Can_Defeat_Koloktos

- name: Ancient Cistern Flame Room
  events:
    Can Complete Ancient Cistern: Goddess_Sword
  exits:
    Ancient Cistern Boss Room: Nothing
    # Crest Hit: Farore's Flame
  locations:
    Ancient Cistern - Farore's Flame: Goddess_Sword
